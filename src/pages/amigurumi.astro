---
import Layout from "../layouts/Layout.astro";
import { collection, getDocs } from "firebase/firestore";
import { db } from "../firebase";
import Card from "../components/Card.astro";

const fetchData = async (products: string) => {
  const ref = collection(db, products);
  const querySnapshot = await getDocs(ref);
  const data = querySnapshot.docs.map((doc) => doc.data());
  return data;
};
const data = await fetchData('amigurumi')
---
<Layout title="Bienvenido a doll">
  <h2 class="text-3xl text-center my-7">Amigurumi</h2>
  <div class="lg:columns-4 sm:columns-3 space-y-5">
    {
      data.map((item) => {
        return (
          <Card product={item} />
        )
      })
    }
  </div>
  
</Layout>
